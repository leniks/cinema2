# üé¨ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Å –Ω–æ–≤—ã–º –±–µ–∫–µ–Ω–¥–æ–º

## –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –±—ã–ª –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤—ã–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—ã–º –±–µ–∫–µ–Ω–¥–æ–º –Ω–∞ FastAPI:

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–æ–≤–æ–≥–æ –±–µ–∫–µ–Ω–¥–∞:

- **Auth Service** (–ø–æ—Ä—Ç 8000) - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- **Main Service** (–ø–æ—Ä—Ç 8001) - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞, —Ñ–∏–ª—å–º—ã, —Ñ–∞–π–ª—ã
- **MinIO** (–ø–æ—Ä—Ç 9000) - —Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- **PostgreSQL** (–ø–æ—Ä—Ç 5432) - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

## –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API (`src/config/api.config.ts`)

- –û–±–Ω–æ–≤–ª–µ–Ω—ã URL –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ MinIO
- –ù–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–æ–∫—Å–∏ –¥–ª—è –ø–æ—Å—Ç–µ—Ä–æ–≤

### 2. API –∫–ª–∏–µ–Ω—Ç (`src/api/movie-api.ts`)

- –†–∞–∑–¥–µ–ª–µ–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ auth –∏ main API
- –û–±–Ω–æ–≤–ª–µ–Ω—ã endpoints –ø–æ–¥ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–∫—Å–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### 3. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`src/contexts/auth-context.tsx`)

- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ JWT —Ç–æ–∫–µ–Ω–æ–≤
- –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ–¥ –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ API
- –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 4. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (`src/interfaces.ts`)

- –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –Ω–æ–≤–æ–≥–æ –±–µ–∫–µ–Ω–¥–∞
- –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–∏–ø—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

## –ó–∞–ø—É—Å–∫

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –ó–∞–ø—É—Å–∫ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
./start-with-new-backend.sh
```

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
yarn install

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
export REACT_APP_API_URL=http://localhost:8001
export REACT_APP_AUTH_URL=http://localhost:8000
export REACT_APP_MINIO_URL=http://localhost:9000
export REACT_APP_MINIO_BUCKET=cinema-files

# –ó–∞–ø—É—Å–∫
yarn start
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è               | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é   | –û–ø–∏—Å–∞–Ω–∏–µ           |
| ------------------------ | ----------------------- | ------------------ |
| `REACT_APP_API_URL`      | `http://localhost:8001` | URL Main Service   |
| `REACT_APP_AUTH_URL`     | `http://localhost:8000` | URL Auth Service   |
| `REACT_APP_MINIO_URL`    | `http://localhost:9000` | URL MinIO          |
| `REACT_APP_MINIO_BUCKET` | `cinema-files`          | –ò–º—è bucket –≤ MinIO |

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–ª–æ–≥–∏–Ω/–ª–æ–≥–∞—É—Ç)
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ —Ñ–∏–ª—å–º–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π —Ñ–∏–ª—å–º–∞
- –ü–æ–∏—Å–∫ —Ñ–∏–ª—å–º–æ–≤ (–±–∞–∑–æ–≤—ã–π)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å—Ç–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏

### ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

- –ü–æ–∏—Å–∫ (–ø—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ)
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ø —Ñ–∏–ª—å–º—ã)
- –ü–æ—Ö–æ–∂–∏–µ —Ñ–∏–ª—å–º—ã (—Å–ª—É—á–∞–π–Ω—ã–µ —Ñ–∏–ª—å–º—ã)

### ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –Ω–æ–≤–æ–º –±–µ–∫–µ–Ω–¥–µ

- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å–º–æ–≤ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
- Elasticsearch –ø–æ–∏—Å–∫
- –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- –ñ–∞–Ω—Ä—ã —Ñ–∏–ª—å–º–æ–≤
- –ò–∑–±—Ä–∞–Ω–Ω–æ–µ –∏ —Å–ø–∏—Å–∫–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç (Film)

```typescript
interface Film {
  movie_id: number
  title: string
  description: string
  release_date: string
  rating: number
  poster_url: string | null
  video_url: string
  duration: number
  genres: string[]
}
```

### –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç (BackendMovie)

```typescript
interface BackendMovie {
  id: number
  title: string
  description: string
  release_date: string
  rating: number
  poster_url: string | null
  movie_url: string
  duration: number
  created_at: string
  updated_at: string
}
```

## API Endpoints

### Auth Service (port 8000)

- `POST /auth/login` - –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `POST /auth/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /auth/logout` - –≤—ã—Ö–æ–¥
- `GET /auth/me` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

### Main Service (port 8001)

- `GET /movies` - —Å–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤
- `GET /movies/{id}` - —Ñ–∏–ª—å–º –ø–æ ID
- `GET /proxy/poster/{movie_id}` - –ø—Ä–æ–∫—Å–∏ –¥–ª—è –ø–æ—Å—Ç–µ—Ä–æ–≤
- `POST /files/upload` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–µ–∫–µ–Ω–¥—É

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Auth Service
curl http://localhost:8000/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Main Service
curl http://localhost:8001/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ MinIO
curl http://localhost:9000/minio/health/live
```

### –õ–æ–≥–∏

–í—Å–µ API –∑–∞–ø—Ä–æ—Å—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ —Å –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏:

- `‚ú® API Response` - —É—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- `üî• API Error` - –æ—à–∏–±–∫–∏

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **TypeScript –æ—à–∏–±–∫–∏** - —Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ `@types/node` –∏ `@types/react`
2. **CORS** - –ø–æ—Å—Ç–µ—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è CORS
3. **–ü–æ–∏—Å–∫** - –ø–æ–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
4. **–ñ–∞–Ω—Ä—ã** - –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ –Ω–æ–≤–æ–º –±–µ–∫–µ–Ω–¥–µ

## –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

1. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –Ω–∞ –±–µ–∫–µ–Ω–¥–µ
2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∂–∞–Ω—Ä–æ–≤
3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å–º–∞–º–∏
5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Elasticsearch

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –±–µ–∫–µ–Ω–¥–∞ –∑–∞–ø—É—â–µ–Ω—ã
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ MinIO —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ –æ —Ñ–∏–ª—å–º–∞—Ö
